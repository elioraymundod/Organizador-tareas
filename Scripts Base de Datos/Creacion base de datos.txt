/*CREATE DATABASE organizador_tareas;*/

CREATE TABLE CATALOGOS(
  	ID INT PRIMARY KEY AUTO_INCREMENT,
    NOMBRE VARCHAR(25),
    DESCRIPCION VARCHAR(100),
    FECHA_CREACION TIMESTAMP,
    USUARIO_CREACION VARCHAR(25),
    FECHA_MODIFICACION TIMESTAMP,
    USUARIO_MODIFICACION VARCHAR(25)
);

/* DROP TABLE CATALOGOS; */

CREATE TABLE CAT_DATO(
  	ID INT PRIMARY KEY AUTO_INCREMENT,
    NOMBRE VARCHAR(25),
    DESCRIPCION VARCHAR(100),
    CATALOGO INT,
    FECHA_CREACION TIMESTAMP,
    USUARIO_CREACION VARCHAR(25),
    FECHA_MODIFICACION TIMESTAMP,
    USUARIO_MODIFICACION VARCHAR(25),
    
    CONSTRAINT FOREIGN KEY FK_CAT_DAT_CAT (CATALOGO) REFERENCES CATALOGOS(ID)
);

/* DROP TABLE CAT_DATO; */

CREATE TABLE USUARIOS(
  	ID INT PRIMARY KEY AUTO_INCREMENT,
    NOMBRE VARCHAR(50),
    USUARIO VARCHAR(25),
    PASS VARCHAR(100),
    EMAIL VARCHAR(50),
    FECHA_CREACION TIMESTAMP,
    USUARIO_CREACION VARCHAR(25),
    FECHA_MODIFICACION TIMESTAMP,
    USUARIO_MODIFICACION VARCHAR(25)
);

/* DROP TABLE USUARIOS; */

CREATE TABLE ETIQUETAS(
  	ID INT PRIMARY KEY AUTO_INCREMENT,
    NOMBRE VARCHAR(50),
    FECHA_CREACION TIMESTAMP,
    USUARIO_CREACION VARCHAR(25),
    FECHA_MODIFICACION TIMESTAMP,
    USUARIO_MODIFICACION VARCHAR(25)
);

/* DROP TABLE ETIQUETAS; */

CREATE TABLE PROYECTOS(
  	ID INT PRIMARY KEY AUTO_INCREMENT,
    NOMBRE VARCHAR(50),
    ABREVIATURA VARCHAR(3),
    DESCRIPCION VARCHAR(1000),
    FECHA_CREACION TIMESTAMP,
    USUARIO_CREACION VARCHAR(25),
    FECHA_MODIFICACION TIMESTAMP,
    USUARIO_MODIFICACION VARCHAR(25),
    PRIVACIDAD int
);

/* DROP TABLE PROYECTOS; */

CREATE TABLE USUARIOS_PROYECTOS(
  	ID INT PRIMARY KEY AUTO_INCREMENT,
    USUARIO INT,
    PROYECTO INT,
    FECHA_CREACION TIMESTAMP,
    USUARIO_CREACION VARCHAR(25),
    FECHA_MODIFICACION TIMESTAMP,
    USUARIO_MODIFICACION VARCHAR(25),
    
    CONSTRAINT FOREIGN KEY FK_PRO_USU (USUARIO) REFERENCES USUARIOS (ID),
    CONSTRAINT FOREIGN KEY FK_PRO_PRO (PROYECTO) REFERENCES PROYECTOS (ID)
);

/* DROP TABLE USUARIOS_PROYECTOS;*/

CREATE TABLE TAREAS(
  	ID INT PRIMARY KEY AUTO_INCREMENT,
    NOMBRE VARCHAR(100),
    DESCRIPCION VARCHAR(1000),
    INFORMADOR INT,
    USUARIO_ASIGNADO INT,
    PRIORIDAD INT,
    PROGRESO INT,
    ESFUERZO INT,
    ETIQUETA INT,
    FECHA_INICIO TIMESTAMP,
    FECHA_FIN TIMESTAMP,
    FECHA_CREACION TIMESTAMP,
    USUARIO_CREACION VARCHAR(25),
    FECHA_MODIFICACION TIMESTAMP,
    USUARIO_MODIFICACION VARCHAR(25),
    
    CONSTRAINT FOREIGN KEY FK_TAR_USER (INFORMADOR) REFERENCES USUARIOS(ID),
    CONSTRAINT FOREIGN KEY FK_TAR_ASIG (USUARIO_ASIGNADO) REFERENCES USUARIOS(ID),
    CONSTRAINT FOREIGN KEY FK_TAR_PRIO (PRIORIDAD) REFERENCES CAT_DATO(ID),
    CONSTRAINT FOREIGN KEY FK_TAR_ETIQ (ETIQUETA) REFERENCES ETIQUETAS(ID)
);

/* DROP TABLE TAREAS; */


CREATE TABLE COLUMNAS_TABLEROS(
  	ID INT PRIMARY KEY,
    TABLERO INT,
    COLUMNAS VARCHAR(10000),
    
    CONSTRAINT FOREIGN KEY FK_PRO_PRO (TABLERO) REFERENCES PROYECTOS (ID)
);

/* DROP TABLE COLUMNAS_TABLEROS; */